(function(){"use strict";var e={8459:function(e,r,t){var n=t(9242),o=t(3396),s=t.p+"img/Loader-blue.7183ceb1.svg";const c={key:1,src:s,alt:"loader",class:"loader loader-main"};function a(e,r,t,n,s,a){const u=(0,o.up)("CurrencyConverter"),i=(0,o.up)("CurrencyRates");return e.rates?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(u,{rates:e.rates},null,8,["rates"]),(0,o.Wm)(i,{rates:e.rates,onUpdateRates:e.updateRates},null,8,["rates","onUpdateRates"])],64)):((0,o.wg)(),(0,o.iD)("img",c))}const u="https://api.currencyfreaks.com/latest?apikey=2607db4c3a714428a631c70071f59991";async function i(e){const r=await fetch(e);return r.json()}async function l(){try{const e=await i(u);return e.rates}catch(e){throw new Error("something went wrong!")}}var d=t(7139),m=t.p+"img/Loader.afe4152d.svg";const y=(0,o._)("h1",{class:"title"},"Currency rates",-1),f={class:"form"},C=(0,o._)("label",{for:"from_currency",class:"form__label"}," currency: ",-1),h=["selected"],p={class:"flex-container"},v=["disabled"],_={key:1,src:m,alt:"loader",class:"loader"},g={class:"table"},w=(0,o._)("tr",{class:"table__row"},[(0,o._)("th",{class:"table__head"},"Currency Name"),(0,o._)("th",{class:"table__head"},"The rate in the selected currency")],-1),b={key:0,class:"table__row"},O={class:"table__colum"},R={class:"table__colum"};function k(e,r,t,s,c,a){const u=(0,o.up)("AddCurrency"),i=(0,o.up)("PopUp");return(0,o.wg)(),(0,o.iD)(o.HY,null,[y,(0,o._)("div",f,[(0,o._)("form",null,[C,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":r[0]||(r[0]=r=>e.selectedCurrency=r),id:"from_currency",name:"from_currency",class:"form__selector"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.defaultCurrencies,(r=>((0,o.wg)(),(0,o.iD)("option",{key:r,selected:r===e.selectedCurrency},(0,d.zw)(r),9,h)))),128))],512),[[n.bM,e.selectedCurrency]]),(0,o._)("div",p,[(0,o._)("button",{class:"button",onClick:r[1]||(r[1]=(0,n.iM)(((...r)=>e.updateRates&&e.updateRates(...r)),["prevent"])),disabled:!e.canUpdateRates},[e.areRatesLoading?((0,o.wg)(),(0,o.iD)("img",_)):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)(" update ")],64))],8,v),(0,o._)("button",{class:"button",onClick:r[2]||(r[2]=(0,n.iM)((()=>e.isAddCurrencyVisible=!0),["prevent"]))}," add ")]),(0,o._)("table",g,[w,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.defaultCurrenciesRates,(r=>((0,o.wg)(),(0,o.iD)(o.HY,{key:r},[r!==e.selectedCurrency?((0,o.wg)(),(0,o.iD)("tr",b,[(0,o._)("td",O,(0,d.zw)(r),1),(0,o._)("td",R,(0,d.zw)(e.rates?e.getConvertedPrice(+e.rates[r]):"error"),1)])):(0,o.kq)("",!0)],64)))),128))])])]),e.isAddCurrencyVisible?((0,o.wg)(),(0,o.j4)(u,{key:0,"added-currencies":e.defaultCurrenciesRates,"available-currencies":e.currenciesNamesArr,onAddCurrency:e.updateDefaultCurrencies,onHideComponent:r[3]||(r[3]=r=>e.isAddCurrencyVisible=!1)},null,8,["added-currencies","available-currencies","onAddCurrency"])):(0,o.kq)("",!0),e.errorMessage?((0,o.wg)(),(0,o.j4)(i,{key:1,message:e.errorMessage,onHidePopUp:r[4]||(r[4]=()=>e.errorMessage="")},null,8,["message"])):(0,o.kq)("",!0)],64)}t(7658);const T=e=>e<.01?e:+e.toFixed(2),U={class:"form pop-up"},A=(0,o._)("label",{for:"from_currency",class:"form__label"}," Currencies: ",-1),D=(0,o._)("option",{value:"",disabled:""},"choose currency to add",-1),S=["selected"],M={class:"flex-container flex-container--between"};function H(e,r,t,s,c,a){const u=(0,o.up)("BlurBlock");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(u),(0,o._)("div",U,[(0,o._)("form",null,[A,(0,o.wy)((0,o._)("select",{id:"from_currency","onUpdate:modelValue":r[0]||(r[0]=r=>e.selectedCurrency=r),name:"from_currency",class:"form__selector"},[D,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.availableCurrencies,(r=>((0,o.wg)(),(0,o.iD)(o.HY,{key:r},[e.addedCurrencies.includes(r)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("option",{key:0,selected:r===e.selectedCurrency},(0,d.zw)(r),9,S))],64)))),128))],512),[[n.bM,e.selectedCurrency]]),(0,o._)("div",M,[(0,o._)("button",{class:"button",onClick:r[1]||(r[1]=(0,n.iM)(((...r)=>e.updateCurrenciesList&&e.updateCurrenciesList(...r)),["prevent"]))}," add to list "),(0,o._)("button",{class:"button",onClick:r[2]||(r[2]=(0,n.iM)((()=>e.$emit("hideComponent")),["prevent"]))}," close ")])])])],64)}const L={class:"blur-block"};function B(e,r,t,n,s,c){return(0,o.wg)(),(0,o.iD)("div",L)}var x=(0,o.aZ)({name:"BlurBlock"}),N=t(89);const Y=(0,N.Z)(x,[["render",B]]);var j=Y,q=(0,o.aZ)({components:{BlurBlock:j},name:"addCurrency",props:{availableCurrencies:{type:Array,required:!0},addedCurrencies:{type:Array,required:!0}},emits:["addCurrency","hideComponent"],data(){return{selectedCurrency:""}},methods:{updateCurrenciesList(){this.selectedCurrency&&this.$emit("addCurrency",this.selectedCurrency),this.selectedCurrency="",this.$emit("hideComponent")}}});const P=(0,N.Z)(q,[["render",H]]);var Z=P;const E={class:"form pop-up"},$={class:"pop-up__message"};function V(e,r,t,s,c,a){const u=(0,o.up)("BlurBlock");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(u),(0,o._)("div",E,[(0,o._)("p",$,(0,d.zw)(e.message),1),(0,o._)("button",{class:"button pop-up__button",onClick:r[0]||(r[0]=(0,n.iM)((()=>e.$emit("hidePopUp")),["prevent"]))}," close ")])],64)}var I=(0,o.aZ)({components:{BlurBlock:j},name:"popUp",props:{message:{type:String,required:!0}},emits:["hidePopUp"]});const J=(0,N.Z)(I,[["render",V]]);var z=J,K=(0,o.aZ)({components:{AddCurrency:Z,PopUp:z},props:{rates:{type:Object,required:!0}},emits:["updateRates"],data(){return{selectedCurrency:"USD",defaultCurrencies:["USD","EUR","UAH"],defaultCurrenciesRates:["USD","EUR","UAH","BTC","ETH"],canUpdateRates:!0,areRatesLoading:!1,isAddCurrencyVisible:!1,errorMessage:""}},methods:{getConvertedPrice(e){if(this.rates){const r=e/+this.rates[this.selectedCurrency];return T(r)}},async updateRates(){this.canUpdateRates=!1;try{this.areRatesLoading=!0;const e=await l();this.$emit("updateRates",e)}catch(e){this.$emit("updateRates",this.rates),this.showError("An error has sprung, cannot update rates")}setTimeout((()=>this.canUpdateRates=!0),5e3),this.areRatesLoading=!1},updateDefaultCurrencies(e){this.defaultCurrenciesRates=[...this.defaultCurrenciesRates,e];const r=[...JSON.parse(localStorage.getItem("currencyRateToShow")||"[]"),e];localStorage.setItem("currencyRateToShow",JSON.stringify(r))},showError(e){this.errorMessage=e}},mounted(){this.defaultCurrenciesRates=[...this.defaultCurrenciesRates,...JSON.parse(localStorage.getItem("currencyRateToShow")||"[]")]},computed:{currenciesNamesArr(){const e=[];for(const r in this.rates)e.push(r);return e.sort(((e,r)=>e.localeCompare(r)))}}});const F=(0,N.Z)(K,[["render",k]]);var W=F;const G=(0,o._)("h1",{class:"title"},"Currency converter",-1),Q={class:"form"},X=(0,o._)("label",{for:"from_currency",class:"form__label"}," currency to conversion: ",-1),ee=["value","selected"],re=(0,o._)("label",{for:"to_currency",class:"form__label"}," converted currency: ",-1),te=["value","selected"],ne=(0,o._)("label",{for:"from_amount",class:"form__label"}," Amount of incoming currency: ",-1),oe=(0,o._)("label",{for:"to_amount",class:"form__label"}," Amount of converted currency: ",-1);function se(e,r,t,s,c,a){const u=(0,o.up)("PopUp");return(0,o.wg)(),(0,o.iD)(o.HY,null,[G,(0,o._)("div",Q,[(0,o._)("form",null,[X,(0,o.wy)((0,o._)("select",{id:"from_currency",name:"from_currency",class:"form__selector","onUpdate:modelValue":r[0]||(r[0]=r=>e.currencyToConvert=r)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.currenciesNamesArr,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e,value:e,selected:"USD"===e},(0,d.zw)(e),9,ee)))),128))],512),[[n.bM,e.currencyToConvert]]),re,(0,o.wy)((0,o._)("select",{id:"to_currency",name:"to_currency",class:"form__selector","onUpdate:modelValue":r[1]||(r[1]=r=>e.convertedCurrency=r)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.currenciesNamesArr,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e,value:e,selected:"BTC"===e},(0,d.zw)(e),9,te)))),128))],512),[[n.bM,e.convertedCurrency]]),ne,(0,o.wy)((0,o._)("input",{ref:"incoming__currency",type:"number",class:"form__input",id:"from_amount",name:"from_amount",min:"0",step:"0.1","onUpdate:modelValue":r[2]||(r[2]=r=>e.amountOfCurrencyToConvert=r),required:""},null,512),[[n.nr,e.amountOfCurrencyToConvert]]),oe,(0,o.wy)((0,o._)("input",{ref:"outcoming__currency",type:"number",class:"form__input",id:"to_amount",name:"to_amount",min:"0",step:"0.01","onUpdate:modelValue":r[3]||(r[3]=r=>e.amountOfConvertedCurrency=r),required:""},null,512),[[n.nr,e.amountOfConvertedCurrency]])])]),e.errorMessage?((0,o.wg)(),(0,o.j4)(u,{key:0,message:e.errorMessage,onHidePopUp:r[4]||(r[4]=()=>e.errorMessage="")},null,8,["message"])):(0,o.kq)("",!0)],64)}var ce=(0,o.aZ)({components:{PopUp:z},props:{rates:{type:Object,required:!0}},data(){return{currencyToConvert:"USD",convertedCurrency:"BTC",currentRateOfCurrencyToConvert:0,currentRateOfConvertedCurrency:0,amountOfCurrencyToConvert:0,amountOfConvertedCurrency:0,conversionLimit:1e4,errorMessage:""}},mounted(){this.rates&&(this.currentRateOfCurrencyToConvert=+this.rates[this.currencyToConvert],this.currentRateOfConvertedCurrency=+this.rates[this.convertedCurrency])},watch:{currencyToConvert(){if(this.rates){this.currentRateOfCurrencyToConvert=+this.rates[this.currencyToConvert],this.amountOfConvertedCurrency=T(this.newAmountConvertedCurrency);const e=this.$refs["incoming__currency"];e.focus(),this.isLimitReached&&this.setTheBiggestAmount()}},convertedCurrency(){if(this.rates){this.currentRateOfConvertedCurrency=+this.rates[this.convertedCurrency],this.amountOfConvertedCurrency=T(this.newAmountConvertedCurrency);const e=this.$refs["outcoming__currency"];e.focus(),this.isLimitReached&&this.setTheBiggestAmount()}},amountOfCurrencyToConvert(){if(this.rates)return this.isLimitReached?(this.setTheBiggestAmount(),void this.showError("you can't convert an amount bigger than 10 000$, the max amount will be set automatically")):void(this.$refs["outcoming__currency"]!==document.activeElement&&(this.amountOfConvertedCurrency=T(this.newAmountConvertedCurrency)))},amountOfConvertedCurrency(){this.$refs["incoming__currency"]!==document.activeElement&&(this.amountOfCurrencyToConvert=T(this.newAmountOfConvertedCurrency))}},computed:{currenciesNamesArr(){const e=[];for(const r in this.rates)e.push(r);return e.sort(((e,r)=>e.localeCompare(r)))},newAmountConvertedCurrency(){return this.amountOfCurrencyToConvert/this.currentRateOfCurrencyToConvert*this.currentRateOfConvertedCurrency},newAmountOfConvertedCurrency(){return this.amountOfConvertedCurrency/(this.currentRateOfConvertedCurrency/this.currentRateOfCurrencyToConvert)},isLimitReached(){return!!this.rates&&this.amountOfCurrencyToConvert/+this.rates[this.currencyToConvert]>this.conversionLimit}},methods:{setTheBiggestAmount(){this.rates&&(this.amountOfCurrencyToConvert=+(this.conversionLimit*+this.rates[this.currencyToConvert]).toFixed(2),this.amountOfConvertedCurrency=+(this.conversionLimit*+this.rates[this.convertedCurrency]).toFixed(2))},showError(e){this.errorMessage=e}}});const ae=(0,N.Z)(ce,[["render",se]]);var ue=ae,ie=(0,o.aZ)({components:{CurrencyRates:W,CurrencyConverter:ue},data(){return{rates:null}},async mounted(){const e=18e6,r=JSON.parse(localStorage.getItem("lastLoading")||"0"),t=(new Date).getTime()-r>e;let n=JSON.parse(localStorage.getItem("exchangeRates")||"null");if(!n||t){const e=await l();localStorage.setItem("exchangeRates",JSON.stringify(e)),n=e,localStorage.setItem("lastLoading",JSON.stringify((new Date).getTime()))}this.rates=n},methods:{updateRates(e){this.rates=e,localStorage.setItem("exchangeRates",JSON.stringify(e))}}});const le=(0,N.Z)(ie,[["render",a]]);var de=le;(0,n.ri)(de).mount("#app")}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(r,n,o,s){if(!n){var c=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],s=e[l][2];for(var a=!0,u=0;u<n.length;u++)(!1&s||c>=s)&&Object.keys(t.O).every((function(e){return t.O[e](n[u])}))?n.splice(u--,1):(a=!1,s<c&&(c=s));if(a){e.splice(l--,1);var i=o();void 0!==i&&(r=i)}}return r}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[n,o,s]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){t.p="/currency_converter_vue3/"}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,n){var o,s,c=n[0],a=n[1],u=n[2],i=0;if(c.some((function(r){return 0!==e[r]}))){for(o in a)t.o(a,o)&&(t.m[o]=a[o]);if(u)var l=u(t)}for(r&&r(n);i<c.length;i++)s=c[i],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(l)},n=self["webpackChunkcurrency_converter_vue3_"]=self["webpackChunkcurrency_converter_vue3_"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(8459)}));n=t.O(n)})();
//# sourceMappingURL=app.1d7f80ce.js.map